<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>æ™ºæ…§é£²é£Ÿç®¡å®¶ï½œé£Ÿç‰©æ—¥æ›†</title>
  
  <script src="https://cdn.jsdelivr.net/npm/vue@2"></script>

  <style>
    /* â˜…â˜…â˜… ç²‰ç´…æ—¥æ›†æ¨£å¼ â˜…â˜…â˜… */
    body {
        background-color: #FFF0F5;
        font-family: 'Segoe UI', sans-serif;
        margin: 0; padding: 20px;
        color: #333;
    }
    
    .container {
        max-width: 900px;
        margin: 0 auto;
        background: #fff;
        border-radius: 20px;
        border: 3px solid #FFB6C1;
        box-shadow: 0 10px 25px rgba(255, 182, 193, 0.2);
        padding: 30px;
        min-height: 80vh;
    }

    h1 { color: #FF6B81; text-align: center; margin: 0 0 5px 0; }
    p.subtitle { text-align: center; color: #888; margin: 0 0 25px 0; }

    /* æ—¥æ›†é ­éƒ¨ */
    .calendar-header {
        display: flex; justify-content: space-between; align-items: center;
        margin-bottom: 20px; font-size: 1.5rem; font-weight: bold; color: #FF6B81;
    }
    .nav-btn {
        cursor: pointer; user-select: none; padding: 5px 15px; border-radius: 50%;
        transition: 0.2s;
    }
    .nav-btn:hover { background-color: #FFF0F3; }

    /* æ˜ŸæœŸæ¨™é¡Œ */
    .weekdays {
        display: grid; grid-template-columns: repeat(7, 1fr);
        text-align: center; font-weight: bold; color: #aaa; margin-bottom: 10px;
    }

    /* æ—¥æœŸæ ¼å­å€ */
    .days-grid {
        display: grid; grid-template-columns: repeat(7, 1fr);
        gap: 10px;
    }

    /* æ¯ä¸€å¤©çš„æ ¼å­ */
    .day-cell {
        background: #fff;
        border: 1px solid #FFE0E6;
        border-radius: 12px;
        min-height: 100px;
        padding: 5px;
        cursor: pointer;
        transition: all 0.2s;
        display: flex; flex-direction: column;
    }
    .day-cell:hover {
        border-color: #FF6B81;
        box-shadow: 0 4px 10px rgba(255, 107, 129, 0.15);
        transform: translateY(-2px);
    }
    .day-cell.empty { border: none; cursor: default; background: transparent; }
    
    .date-num {
        font-weight: bold; font-size: 0.9rem; color: #555;
        margin-bottom: 5px; align-self: flex-end;
        width: 25px; height: 25px; text-align: center; line-height: 25px;
        border-radius: 50%;
    }
    
    .day-cell.today { border: 2px solid #FF6B81; }
    .day-cell.today .date-num { background-color: #FF6B81; color: white; }

    /* â˜…â˜…â˜… é¤é»æ¨™ç±¤é¡è‰²è¨­å®š â˜…â˜…â˜… */
    .meal-tag {
        font-size: 0.75rem; color: white; padding: 2px 6px;
        border-radius: 4px; margin-bottom: 3px;
        white-space: nowrap; overflow: hidden; text-overflow: ellipsis;
    }
    .bg-breakfast { background-color: #FF9F43; } /* æ—©é¤ï¼šæ©˜è‰² */
    .bg-lunch { background-color: #54a0ff; }     /* åˆé¤ï¼šè—è‰² */
    .bg-dinner { background-color: #FF6B81; }    /* æ™šé¤ï¼šç²‰è‰² */
    .bg-snack { background-color: #2ecc71; }     /* é»å¿ƒï¼šç¶ è‰² */

    /* åœ–ä¾‹èªªæ˜å€ */
    .legend {
        display: flex; justify-content: center; gap: 15px; margin-top: 20px;
        font-size: 0.9rem; color: #666;
    }
    .legend-item { display: flex; align-items: center; gap: 5px; }
    .legend-dot { width: 10px; height: 10px; border-radius: 50%; }

    .btn-back {
        display: block; margin: 30px auto 0; width: fit-content;
        color: #999; text-decoration: none; font-size: 0.9rem;
        padding: 8px 20px; border-radius: 20px; border: 1px solid transparent;
        transition: 0.3s;
    }
    .btn-back:hover { border-color: #FF6B81; color: #FF6B81; background: #FFF0F3; }
  </style>
</head>
<body data-theme="light">

<div class="container" id="app">
    <h1>ğŸ“… é£Ÿç‰©æ—¥æ›†</h1>
    <p class="subtitle">æ‚¨çš„é£²é£Ÿè¶³è·¡ï¼Œä¸€ç›®äº†ç„¶ã€‚</p>

    <div class="calendar-header">
        <div class="nav-btn" @click="changeMonth(-1)">&#10094;</div>
        <div>{{ currentYear }}å¹´ {{ currentMonth + 1 }}æœˆ</div>
        <div class="nav-btn" @click="changeMonth(1)">&#10095;</div>
    </div>

    <div class="weekdays">
        <div>æ—¥</div><div>ä¸€</div><div>äºŒ</div><div>ä¸‰</div><div>å››</div><div>äº”</div><div>å…­</div>
    </div>

    <div class="days-grid">
        <div v-for="n in paddingDays" :key="'pad-'+n" class="day-cell empty"></div>

        <div v-for="day in daysInMonth" :key="day" 
             class="day-cell" 
             :class="{ today: isToday(day) }"
             @click="handleDayClick(day)">
            
            <div class="date-num">{{ day }}</div>
            
            <div v-for="(meal, idx) in getMealsForDay(day)" :key="idx">
                <div class="meal-tag" :class="getMealColor(meal.type)">
                    {{ meal.name }}
                </div>
            </div>
        </div>
    </div>

    <div class="legend">
        <div class="legend-item"><div class="legend-dot bg-breakfast"></div>æ—©é¤</div>
        <div class="legend-item"><div class="legend-dot bg-lunch"></div>åˆé¤</div>
        <div class="legend-item"><div class="legend-dot bg-dinner"></div>æ™šé¤</div>
        <div class="legend-item"><div class="legend-dot bg-snack"></div>é»å¿ƒ</div>
    </div>

    <a href="home.html" class="btn-back">â† è¿”å›ä¸»é </a>
</div>

<script>
new Vue({
    el: '#app',
    data: {
        currentYear: new Date().getFullYear(),
        currentMonth: new Date().getMonth(),
        today: new Date(),
        mealData: {} 
    },
    computed: {
        daysInMonth() { return new Date(this.currentYear, this.currentMonth + 1, 0).getDate(); },
        paddingDays() { return new Date(this.currentYear, this.currentMonth, 1).getDay(); }
    },
    mounted() {
        this.generateMockData();
    },
    methods: {
        isToday(day) {
            return this.today.getDate() === day && 
                   this.today.getMonth() === this.currentMonth && 
                   this.today.getFullYear() === this.currentYear;
        },
        changeMonth(delta) {
            let newMonth = this.currentMonth + delta;
            if (newMonth > 11) { this.currentMonth = 0; this.currentYear++; } 
            else if (newMonth < 0) { this.currentMonth = 11; this.currentYear--; } 
            else { this.currentMonth = newMonth; }
            this.generateMockData();
        },
        getMealsForDay(day) {
            const key = `${this.currentYear}-${this.currentMonth+1}-${day}`;
            return this.mealData[key] || [];
        },
        
        // â˜…â˜…â˜… é¡è‰²åˆ¤æ–·é‚è¼¯ (æ–°å¢é»å¿ƒ) â˜…â˜…â˜…
        getMealColor(type) {
            if (type === 'æ—©é¤') return 'bg-breakfast';
            if (type === 'åˆé¤') return 'bg-lunch';
            if (type === 'æ™šé¤') return 'bg-dinner';
            if (type === 'é»å¿ƒ') return 'bg-snack'; // æ–°å¢é»å¿ƒé¡è‰²
            return 'bg-snack'; // é è¨­å€¼
        },

        // é»æ“Šæ–°å¢
        handleDayClick(day) {
            const input = prompt(`âœï¸ æ–°å¢ ${this.currentMonth+1}æœˆ${day}æ—¥ çš„ç´€éŒ„ï¼š\n(è¼¸å…¥å…§å®¹ï¼Œç³»çµ±æœƒè‡ªå‹•åˆ¤æ–·é¤åˆ¥ï¼Œä¾‹å¦‚ï¼šæ—©é¤ è›‹é¤…)`);
            if (input) {
                let type = 'é»å¿ƒ'; // é è¨­ç‚ºé»å¿ƒ
                if (input.includes('æ—©')) type = 'æ—©é¤';
                if (input.includes('åˆ')) type = 'åˆé¤';
                if (input.includes('æ™š')) type = 'æ™šé¤';

                const key = `${this.currentYear}-${this.currentMonth+1}-${day}`;
                if (!this.mealData[key]) this.$set(this.mealData, key, []);
                
                this.mealData[key].push({ type: type, name: input });
                alert(`âœ… å·²æ–°å¢ä¸€ç­† [${type}] ç´€éŒ„ï¼`);
            }
        },

        // ç”Ÿæˆå‡è³‡æ–™ (åŒ…å«é»å¿ƒ)
        generateMockData() {
            const data = {};
            const foodList = [
                {n:'é®ªé­šè›‹é¤…', t:'æ—©é¤'}, {n:'é›è…¿ä¾¿ç•¶', t:'åˆé¤'}, {n:'ç‰›è‚‰éºµ', t:'æ™šé¤'},
                {n:'ç„¡ç³–è±†æ¼¿', t:'æ—©é¤'}, {n:'æ’éª¨é£¯', t:'åˆé¤'}, {n:'ç‡™é’èœ', t:'æ™šé¤'},
                {n:'ä¾¿åˆ©å•†åº—é£¯ç³°', t:'æ—©é¤'}, {n:'ç¾©å¤§åˆ©éºµ', t:'åˆé¤'}, {n:'å°ç«é‹', t:'æ™šé¤'},
                // æ–°å¢ä¸€äº›é»å¿ƒ
                {n:'çç å¥¶èŒ¶', t:'é»å¿ƒ'}, {n:'é›è›‹ç³•', t:'é»å¿ƒ'}, {n:'æ°´æœ', t:'é»å¿ƒ'}, {n:'å„ªæ ¼', t:'é»å¿ƒ'}
            ];

            const days = new Date(this.currentYear, this.currentMonth + 1, 0).getDate();
            for (let d = 1; d <= days; d++) {
                if (Math.random() > 0.3) {
                    const key = `${this.currentYear}-${this.currentMonth+1}-${d}`;
                    const dailyMeals = [];
                    const count = Math.ceil(Math.random() * 4); // æ¯å¤© 1~4 é¤
                    for(let i=0; i<count; i++) {
                        const food = foodList[Math.floor(Math.random() * foodList.length)];
                        dailyMeals.push({ type: food.t, name: food.n });
                    }
                    data[key] = dailyMeals;
                }
            }
            this.mealData = data;
        }
    }
});
</script>

</body>
</html>